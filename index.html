<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>賽車旗號小學堂</title>
    <style>
        body {
            /* 讓整個頁面內容置中 */
            display: flex;
            justify-content: center; /* 水平置中 */
            align-items: center; /* 垂直置中 (如果你希望內容垂直置中) */
            min-height: 100vh; /* 確保 body 至少有視窗高度 */
            margin: 0;
            background-color: #f0f0f0; /* 可選：讓背景顏色更明顯 */
            /* 使用系統字體 */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        }

        .game-container {
            width: 90%; /* 設定容器寬度 */
            max-width: 600px; /* 設定最大寬度，避免在寬螢幕上過大 */
            padding: 20px;
            text-align: center;
            border: 1px solid #ccc;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            background-color: #fff;
        }

        .result-image {
            width: 300px;
            height: auto;
            display: block;
            margin: 20px auto;
        }
        
        /* 遊戲按鈕樣式 */
        .options {
            margin: 20px 0;
        }

        .option-btn {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
            border: 1px solid #007bff;
            border-radius: 5px;
            background-color: #007bff;
            color: white;
        }
        
        #restart-btn {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border: 1px solid #28a745;
            border-radius: 5px;
            background-color: #28a745;
            color: white;
            margin-top: 20px;
        }

        #share-link {
            display: inline-block;
            margin-top: 10px;
            color: #007bff;
            text-decoration: none;
        }

        /* 新增的預約連結樣式 */
        #book-link {
            display: block;
            margin-top: 20px;
            font-weight: bold;
            color: #ff5722;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>賽車旗號小學堂</h1>
        <div id="flag-display"></div>
        <p id="question-text"></p>
        <div class="options">
            <button class="option-btn"></button>
            <button class="option-btn"></button>
            <button class="option-btn"></button>
        </div>
        <p id="result-message"></p>
        <div id="result-image-container"></div>
        <button id="restart-btn" style="display: none;">重新開始</button>
	<br>
	<br>
        <a id="share-link" href="https://reurl.cc/NxYbQ5" target="_blank" style="display: none;">到 Facebook 查看更多資訊</a>
        <a id="book-link" href="https://lin.ee/kGa2Hf9" target="_blank" style="display: none;">點擊預約遊玩小小卡丁車</a>
    </div>

    <script>
        const flags = [
            {
                image: 'images/黑旗.jpg',
                correctAnswer: '禁止通行',
                options: ['禁止通行', '比賽結束', '危險狀況']
            },
            {
                image: 'images/紅旗.jpg',
                correctAnswer: '立即停止',
                options: ['禁止超車', '立即停止', '賽道濕滑']
            },
            {
                image: 'images/黃旗.jpg',
                correctAnswer: '前方危險',
                options: ['前方危險', '車輛故障', '超車警告']
            },
            {
                image: 'images/綠旗.jpg',
                correctAnswer: '警報解除',
                options: ['警報解除', '車輛故障', '超車警告']
            },
            {
                image: 'images/黑白格旗.jpg',
                correctAnswer: '抵達終點',
                options: ['前方危險', '抵達終點', '超車警告']
            },
            {
                image: 'images/藍旗.jpg',
                correctAnswer: '超車警告',
                options: ['前方危險', '抵達終點', '超車警告']
            }
        ];

        const flagDisplay = document.getElementById('flag-display');
        const questionText = document.getElementById('question-text');
        const optionButtons = document.querySelectorAll('.option-btn');
        const resultMessage = document.getElementById('result-message');
        const restartButton = document.getElementById('restart-btn');
        const shareLink = document.getElementById('share-link');
        const bookLink = document.getElementById('book-link'); // 取得新的預約連結
        const resultImageContainer = document.getElementById('result-image-container');

        let currentFlagIndex = 0;
        let score = 0;

        function loadQuestion() {
            if (currentFlagIndex >= flags.length) {
                endGame();
                return;
            }

            const currentFlag = flags[currentFlagIndex];
            flagDisplay.innerHTML = `<img src="${currentFlag.image}" alt="Racing Flag">`;
            questionText.textContent = `這是什麼旗號？ (第 ${currentFlagIndex + 1} 題)`;
            resultMessage.textContent = '';
            resultImageContainer.innerHTML = '';

            const shuffledOptions = shuffleArray([...currentFlag.options]);

            optionButtons.forEach((button, index) => {
                button.textContent = shuffledOptions[index];
                button.style.display = 'inline-block';
                button.onclick = () => processAnswer(button.textContent, currentFlag.correctAnswer);
            });

            restartButton.style.display = 'none';
            shareLink.style.display = 'none';
            bookLink.style.display = 'none'; // 新增：隱藏預約連結
        }

        function processAnswer(selectedOption, correctAnswer) {
            if (selectedOption === correctAnswer) {
                score++;
                resultMessage.textContent = '答對了！';
                resultMessage.style.color = 'green';
            } else {
                resultMessage.textContent = `答錯了！正確答案是「${correctAnswer}」。`;
                resultMessage.style.color = 'red';
            }

            currentFlagIndex++;
            setTimeout(loadQuestion, 1500);
        }

        function endGame() {
            flagDisplay.innerHTML = '';
            questionText.textContent = '';
            optionButtons.forEach(btn => btn.style.display = 'none');
            
            let feedback = '';
            if (score === flags.length) {
                feedback = '你對賽車旗號瞭若指掌！真是個賽車專家！';
            } else if (score >= flags.length / 2) {
                feedback = '表現不錯！你已經掌握了大部分旗號的意義。';
            } else {
                feedback = '別灰心！多練習幾次，你也能成為賽車高手！';
            }

            resultMessage.innerHTML = `遊戲結束！你的總得分是：${score} / ${flags.length}。<br>${feedback}`;
            resultMessage.style.color = 'blue';
            
            resultImageContainer.innerHTML = `<img src="images/LOGO.jpg" alt="遊戲結束" class="result-image">`;
            
            restartButton.style.display = 'inline-block';
            shareLink.style.display = 'inline-block';
            bookLink.style.display = 'block'; // 新增：顯示預約連結

            restartButton.onclick = () => {
                currentFlagIndex = 0;
                score = 0;
                loadQuestion();
            };
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        loadQuestion();
    </script>
</body>
</html>
